<?xml version="1.0" encoding="UTF-8"?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms" 
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:services="clr-namespace:Bittr.Services"
             Title="BITTR" 
             x:Class="Bittr.Views.HomePage">

    <ContentPage.Content>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>


            <StackLayout Grid.Row="0" Orientation="Horizontal" HorizontalOptions="StartAndExpand" Padding="16">

                <StackLayout Orientation="Vertical">
                    <Label Margin="0, 0, 32, 0" FontFamily="{StaticResource RegularFont}" FontSize="24" HorizontalOptions="FillAndExpand" HorizontalTextAlignment="End" Text="What are you " />

                    <Label Margin="0, 0, 32, 0" FontFamily="{StaticResource BoldFont}" FontSize="60" HorizontalOptions="FillAndExpand" HorizontalTextAlignment="End" Text="BITTER" />

                    <Label Margin="0, 0, 32, 0" FontFamily="{StaticResource RegularFont}" FontSize="24" HorizontalOptions="FillAndExpand" HorizontalTextAlignment="End" Text="about today?" />

                </StackLayout>

                <Image Source="lemon1" WidthRequest="100" HorizontalOptions="Start" />

            </StackLayout>

            <StackLayout Orientation="Horizontal"
                         Grid.Row="1">
                <Entry Text=""
                       Placeholder="What are you bitter about?"
                       HorizontalOptions="FillAndExpand" />
                
                <ImageButton WidthRequest="50"
                             HeightRequest="50"
                             BackgroundColor="{StaticResource LightYellow}"
                             BorderColor="{StaticResource MediumYellow}"
                             Source="add_comment.png"
                             HorizontalOptions="End"/>
            </StackLayout>

            <ListView Grid.Row="2" 
                      ItemsSource="{Binding Complaints}" 
                      HasUnevenRows="True"
                      Margin="0,8,0,0"
                      SeparatorVisibility="None">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <ViewCell>
                            <Frame BorderColor="Gray"
                                   CornerRadius="5"
                                   Padding="8"
                                   Margin="8"
                                   HasShadow="True">
                                <StackLayout Spacing="10">
                                    <StackLayout Orientation="Horizontal">
                                        <Label Text="{Binding Creator.Username}"
                                               FontSize="Medium"
                                               FontAttributes="Bold"
                                               HorizontalOptions="StartAndExpand"
                                               />
                                        <Image Source="lemon5.png"
                                               WidthRequest="30"
                                               HorizontalOptions="End"/>
                                        <Label Text="{Binding Lemons}"
                                               HorizontalOptions="End"
                                               Margin="8,0,8,0"
                                               VerticalTextAlignment="Center"
                                               />
                                    </StackLayout>
                                    
                                    <BoxView Color="Gray"
                                             HeightRequest="2"
                                             HorizontalOptions="Fill" />
                                    <Image Source="{Binding ImageName}" 
                                           HorizontalOptions="FillAndExpand" 
                                           Aspect="AspectFit"/>
                                    <Label Text="{Binding Text}" FontSize="Large" />                                    

                                    <Label Text="{Binding Timestamp}" FontSize="Caption" />

                                    <BoxView Color="Gray"
                                             HeightRequest="1"
                                             HorizontalOptions="Fill"
                                             Margin="0,8,0,8"/>

                                    <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="2*"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="2*"/>
                                            </Grid.ColumnDefinitions>
                                        <ImageButton IsVisible="{Binding HasUpvoted, Converter={services:InverseBoolConverter}}"
                                                     x:Name="upArrowVoted"
                                                     Source="up.png" 
                                                     Grid.Column="0"
                                                     WidthRequest="30"
                                                     HorizontalOptions="Center"
                                                     BackgroundColor="Transparent"
                                                     BorderColor="Transparent"/>
                                        <!--<Image />-->
                                            <Label Text="{Binding Score}"
                                                   Grid.Column="1"
                                                   HorizontalOptions="Center"/>
                                            <Image Source="down.png" 
                                                   Grid.Column="2"
                                                   WidthRequest="30"
                                                   HorizontalOptions="Center"/>
                                        </Grid>
                                        <!--<ImageButton Source="up.png" WidthRequest="50" Aspect="AspectFit" IsOpaque="False" />
                                        
                                        <ImageButton Source="down.png" WidthRequest="50" Aspect="AspectFit" />-->
                                    
                                    


                                </StackLayout>
                            </Frame>
                        </ViewCell>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>



        </Grid>

    </ContentPage.Content>
</ContentPage>
